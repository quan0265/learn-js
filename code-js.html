
<h1>hello</h1>

<div class="modal" style="height: 100px">
	<div class="modal-container">modal container</div>
</div>

<script type="text/javascript">
	
const h1= document.querySelector('h1')

// Rút gọn document.querySelector, document.querySelectorAll
const $ = document.querySelector.bind(document)
const $$ = document.querySelectorAll.bind(document)
// or
function S (selector) {
	return document.querySelector(selector)
}

// hiển thị element
console.log(h1)

// hiển thị all method of element
console.log([h1])

//  hiên thị all propety của 1 element
console.dir(h1) 
// Hiển thị dữ liệu theo dạng cây phân cấp, bạn có thể tương tác để xem các thuộc tính bên trong.

console.table(h1): 
// cho phép hiển thị dữ liệu dưới dạng bảng. Không chỉ dùng cho các dữ liệu dạng bảng, console.table() còn có thể đọc các thuộc tính của đối tượng phức tạp để hiển thị. Tất nhiên không thể thiếu, bạn có thể nhấn vào tiêu đề của một cột để table sắp xếp dữ liệu theo cột đó.

// select element:
	// - chọn thể img-block bên ngoài img gần nhất
	document.querySelector('img').closest('.img-block');


var html = '<button class="button1">button 1</button>'
// convert nodelist to array: 2 cách dùng spread operator, Array.prototype.slice()
var images = document.querySelectorAll('img')
var images_array = [...images]

// Tìm index của element
// - Dùng spread operator. findindex
var index = [...images].findIndex((item) => item.getAttribute('src') === '1.jpg')

// delegate 
document.body.addEventListener('click', function(e) {
	// Nếu click đúng là element .modal (child element không tính)
	if (e.target.matches('.modal')) {}

	// Nếu click đúng là element .modal (child element không tính)
	if (e.target.classList.contains('.modal')) {}

	// Nếu click element và tính cả child element bên trong
	 if (e.target.closest('.modal')) {}
})

// Chèn html vào elemnt:
	// insertAdjacentHTML
		// beforebegin - phía trước element
		// afterbegin - nằm phía trong element, đằng trước node con đầu tiên
		// beforeend - nằm phía trong, đằng sau node con cuối cùng.
		// afterend - nằm sau element.
		document.body.insertAdjacentHTML('beforeend', html)



// - Vòng đời của một trang HTML:
// - DOMContentLoaded, load, beforeunload, unload.

// - DOMContentLoaded event - DOM đã sẵn sàng, có thể thao tác với DOM. vd: document.querySelector('.className').
// - load event - Tài nguyên đã được tải, như hình ảnh, css,...
// - beforeunload event - Người dùng sẽ rời khỏi trang: chúng ta có thể kiểm tra xem người dùng có lưu các thay đổi hay không và hỏi họ xem họ có thực sự muốn rời đi không.
// - unload event - người dùng gần như rời đi, nhưng chúng ta vẫn có thể bắt đầu một số thao tác, chẳng hạn như gửi số liệu thống kê.

var beginTime = performance.now();
console.log('Bắt đầu', beginTime);

// khi load trang xong html, chưa load image, css,.. nếu gặp script, style thì chờ script, style chạy xong rồi chạy tiếp
document.addEventListener('DOMContentLoaded', function() {
	var endTime = performance.now();
    console.log('DOMContentLoaded endTime', endTime);
})

// load toàn bộ trang xong bao gồm hình ảnh video, js
window.onload = function() {
	var endTime = performance.now();
    console.log('window.onload endTime', endTime);
}

// khi rời khỏi trang
window.onunload = function() {

}

// Ngăn chặn hành vi nổi bot mặc đinh: gán sự kiên cho class modal, khi click vào các element trong class modal thì sự kiện click vào class modal cũng hoạt động. Trong class modal có element class modal-container, khi click vào modal-container thì sự kiện click vào modal không hoạt đông
const modal_container = document.querySelector('modal-container')
modal_container.addEventListener('click', function(e) {
	e.stopPropagation()
})

// Chuyển html encode sang html decode:
var editor_value = '&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n\n&lt;h1&gt;My first PHP page&lt;/h1&gt;\n\n&lt;?php\necho &quot;Hello World!&quot;;\n?&gt; \n\n&lt;/body&gt;\n&lt;/html&gt;';
var block = document.createElement('div');
block.innerHTML = editor_value;
// document.querySelector('body').appendChild(block);
var editor_value = block.textContent;

// Gán event cho element được tạo ra, delegate element
var toast = document.querySelector('.toast')
toast.onclick = function(e) {
	if (e.target.closest('.toast__close')) {
		main.removeChild(toast)
		clearTimeout(autoRemoveId)
	}
}

// clear timeout
const autoRemoveId = setTimeout(function() {
	console.log(222)
}, 3000)
clearTimeout(autoRemoveId)









</script>